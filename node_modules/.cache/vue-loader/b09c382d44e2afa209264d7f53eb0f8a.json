{"remainingRequest":"/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/yujunjiang/Documents/GitHub/a-different-game/src/components/USRevChart.vue?vue&type=style&index=0&id=2e9c516e&scoped=true&lang=css","dependencies":[{"path":"/Users/yujunjiang/Documents/GitHub/a-different-game/src/components/USRevChart.vue","mtime":1619669797393},{"path":"/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1616796459000},{"path":"/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jaGFydC1ib2R5IHsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KLnRvdGFsIHsKICBjb2xvcjogIzkxNDZmZjsKfQouaGFyZHdhcmUgewogIGNvbG9yOiAjZjkyNzcyOwp9Ci5zb2Z0d2FyZSB7CiAgY29sb3I6ICMwMGU0Yzk7Cn0KLmFjY2Vzc29yaWVzIHsKICBjb2xvcjogI2NmYzQ2ODsKfQo="},{"version":3,"sources":["/Users/yujunjiang/Documents/GitHub/a-different-game/src/components/USRevChart.vue"],"names":[],"mappings":";AA6KA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACL,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACR,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACR,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChB","file":"/Users/yujunjiang/Documents/GitHub/a-different-game/src/components/USRevChart.vue","sourceRoot":"","sourcesContent":["<template>\n  <div>\n    <ChartTitle>Monthly revenue of the U.S. video game industry 2019-2021</ChartTitle>\n    <div class=\"chart-body\" ref=\"container\">\n      <svg \n        :viewBox=\"`0 0 ${width} ${height}`\"\n        ref=\"svg\"\n        @mousemove=\"moved\"\n        @mouseenter=\"entered\"\n        @mouseleave=\"left\"\n      >\n        <ChartXAxis\n          :x=\"x\"\n          :tick-values=\"xTickValues\"\n          :tick-format=\"xTickFormat\"\n          :transform=\"`translate(0,${height - margin.bottom})`\"\n        />\n        <ChartYAxis\n          :y=\"y\"\n          :transform=\"`translate(${margin.left},0)`\"\n        />\n        <g>\n          <g v-for=\"s in series\" :key=\"s.name\" :class=\"s.name\">\n            <path\n              fill=\"none\"\n              stroke-width=\"2\"\n              stroke=\"currentColor\"\n              :d=\"lineGenerator(s.values)\"\n            ></path>\n            <circle\n              v-for=\"(v, i) in s.values\"\n              :key=\"i\"\n              :cx=\"x(i)\"\n              :cy=\"y(v)\"\n              r=\"5\"\n              fill=\"#ffffff\"\n              stroke-width=\"2\"\n              stroke=\"currentColor\"\n            ></circle>\n          </g>\n        </g>\n        <line\n          stroke=\"currentColor\"\n          stroke-dasharray=\"3 4\"\n          :y1=\"margin.top\"\n          :y2=\"height - margin.bottom\"\n          :transform=\"`translate(${tooltipX},0)`\"\n        ></line>\n      </svg>\n      <ChartTooltip\n        :bounds-width=\"width\"\n        :x=\"tooltipX\"\n        :y=\"tooltipY\"\n        :show=\"tooltipShow\"\n      >\n        <div v-if=\"tooltipI !== null\">\n          <div class=\"tooltip-item tooltip-title\">{{ dates[tooltipI] }}</div>\n          <div v-for=\"s in series\" :key=\"s.name\" class=\"tooltip-item\">\n            <div :class=\"s.name\" class=\"tooltip-name\">{{ s.name }}</div>\n            <div>{{ formatValue(s.values[tooltipI]) }}</div>\n          </div>\n        </div>\n      </ChartTooltip>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { json, scaleLinear, min, max, line, range, pointer } from \"d3\";\nimport ChartTitle from \"./ChartTitle.vue\";\nimport ChartXAxis from \"./ChartXAxis.vue\";\nimport ChartYAxis from \"./ChartYAxis.vue\";\nimport ChartTooltip from \"./ChartTooltip.vue\";\n\nexport default {\n  components: {\n    ChartTitle,\n    ChartXAxis,\n    ChartYAxis,\n    ChartTooltip\n  },\n  data() {\n    return {\n      dates: [],\n      series: [],\n      minValue: 0,\n      maxValue: 0,\n      width: 300,\n      height: 400,\n      margin: {\n        top: 10,\n        right: 5,\n        bottom: 60,\n        left: 30\n      },\n      tooltipI: null,\n      tooltipY: 0,\n      tooltipShow: false\n    }\n  },\n  computed: {\n    x() {\n      return scaleLinear()\n        .domain([-1, this.dates.length])\n        .range([this.margin.left, this.width - this.margin.right]);\n    },\n    y() {\n      return scaleLinear()\n        .domain([this.minValue, this.maxValue])\n        .range([this.height - this.margin.bottom, this.margin.top])\n        .nice();\n    },\n    lineGenerator() {\n      return line()\n        .x((d, i) => this.x(i))\n        .y(d => this.y(d));\n    },\n    xTickValues() {\n      return range(0, this.dates.length);\n    },\n    xTickFormat() {\n      return (i) => this.dates[i];\n    },\n    tooltipX() {\n      return this.tooltipShow && this.tooltipI !== null ? this.x(this.tooltipI) : -999;\n    }\n  },\n  created() {\n    json('usvideogame_revenue.json')\n    .then(data => {\n      this.dates = data.map(d => d.date);\n      this.series = [\"total\", \"hardware\", \"software\", \"accessories\"].map(s => ({\n        name: s,\n        values: data.map(d => d[s] === \"-\" ? d[\"game_content\"] : d[s])\n      }));\n      this.minValue = min(this.series, s => min(s.values));\n      this.maxValue = max(this.series, s => max(s.values));\n    });\n  },\n  mounted() {\n    this.resize();\n    window.addEventListener(\"resize\", this.resize);\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"resize\", this.resize);\n  },\n  methods: {\n    resize() {\n      this.width = this.$refs.container.clientWidth;\n    },\n    moved(event) {\n      const p = pointer(event, this.$refs.svg);\n      const xm = this.x.invert(p[0]);\n      const i = Math.min(Math.max(0, Math.round(xm)), this.dates.length - 1);\n      if (i !== this.tooltipI) {\n        this.tooltipI = i;\n      }\n    },\n    entered() {\n      this.tooltipShow = true;\n    },\n    left() {\n      this.tooltipShow = false;\n      this.tooltipI = null;\n    },\n    formatValue(v) {\n      return `$ ${v.toFixed(2)}B`\n    }\n  }\n}\n</script>\n\n<style scoped>\n.chart-body {\n  position: relative;\n}\n.total {\n  color: #9146ff;\n}\n.hardware {\n  color: #f92772;\n}\n.software {\n  color: #00e4c9;\n}\n.accessories {\n  color: #cfc468;\n}\n</style>"]}]}