{"remainingRequest":"/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/thread-loader/dist/cjs.js!/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/babel-loader/lib/index.js!/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/yujunjiang/Documents/GitHub/a-different-game/src/components/USSpendGrowthChart.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/yujunjiang/Documents/GitHub/a-different-game/src/components/USSpendGrowthChart.vue","mtime":1620184539128},{"path":"/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/cache-loader/dist/cjs.js","mtime":1620184536839},{"path":"/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/thread-loader/dist/cjs.js","mtime":1620184538875},{"path":"/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/babel-loader/lib/index.js","mtime":1620184536792},{"path":"/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/cache-loader/dist/cjs.js","mtime":1620184536839},{"path":"/Users/yujunjiang/Documents/GitHub/a-different-game/node_modules/vue-loader-v16/dist/index.js","mtime":1620184538932}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0IHsganNvbiwgbWluLCBtYXgsIHNjYWxlQmFuZCwgc2NhbGVMaW5lYXIgfSBmcm9tICJkMyI7CmltcG9ydCBDaGFydFRpdGxlIGZyb20gIi4vQ2hhcnRUaXRsZS52dWUiOwppbXBvcnQgQ2hhcnRYQXhpcyBmcm9tICIuL0NoYXJ0WEF4aXMudnVlIjsKaW1wb3J0IENoYXJ0WUF4aXMgZnJvbSAiLi9DaGFydFlBeGlzLnZ1ZSI7CmltcG9ydCBDaGFydFRvb2x0aXAgZnJvbSAiLi9DaGFydFRvb2x0aXAudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENoYXJ0VGl0bGU6IENoYXJ0VGl0bGUsCiAgICBDaGFydFhBeGlzOiBDaGFydFhBeGlzLAogICAgQ2hhcnRZQXhpczogQ2hhcnRZQXhpcywKICAgIENoYXJ0VG9vbHRpcDogQ2hhcnRUb29sdGlwCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZ3JvdXBzOiBbXSwKICAgICAgc2VyaWVzOiBbXSwKICAgICAgcmVjb3JkczogW10sCiAgICAgIG1pblZhbHVlOiAwLAogICAgICBtYXhWYWx1ZTogMCwKICAgICAgd2lkdGg6IDMwMCwKICAgICAgaGVpZ2h0OiA0MDAsCiAgICAgIG1hcmdpbjogewogICAgICAgIHRvcDogMTAsCiAgICAgICAgcmlnaHQ6IDUsCiAgICAgICAgYm90dG9tOiAxMjAsCiAgICAgICAgbGVmdDogNDgKICAgICAgfSwKICAgICAgdG9vbHRpcERhdGE6IG51bGwsCiAgICAgIHRvb2x0aXBZOiAxMDAsCiAgICAgIHRvb2x0aXBTaG93OiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB4OiBmdW5jdGlvbiB4KCkgewogICAgICByZXR1cm4gc2NhbGVCYW5kKCkuZG9tYWluKHRoaXMuZ3JvdXBzKS5yYW5nZShbdGhpcy5tYXJnaW4ubGVmdCwgdGhpcy53aWR0aCAtIHRoaXMubWFyZ2luLnJpZ2h0XSkucGFkZGluZygwLjQpOwogICAgfSwKICAgIHhJbm5lcjogZnVuY3Rpb24geElubmVyKCkgewogICAgICByZXR1cm4gc2NhbGVCYW5kKCkuZG9tYWluKHRoaXMuc2VyaWVzKS5yYW5nZShbMCwgdGhpcy54LmJhbmR3aWR0aCgpXSkucGFkZGluZygwLjEpOwogICAgfSwKICAgIHk6IGZ1bmN0aW9uIHkoKSB7CiAgICAgIHJldHVybiBzY2FsZUxpbmVhcigpLmRvbWFpbihbdGhpcy5taW5WYWx1ZSwgdGhpcy5tYXhWYWx1ZV0pLnJhbmdlKFt0aGlzLmhlaWdodCAtIHRoaXMubWFyZ2luLmJvdHRvbSwgdGhpcy5tYXJnaW4udG9wXSkubmljZSgpOwogICAgfSwKICAgIGZvcm1hdFZhbHVlOiBmdW5jdGlvbiBmb3JtYXRWYWx1ZSgpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuICIiLmNvbmNhdCh2LCAiJSIpOwogICAgICB9OwogICAgfSwKICAgIHRvb2x0aXBYOiBmdW5jdGlvbiB0b29sdGlwWCgpIHsKICAgICAgcmV0dXJuIHRoaXMudG9vbHRpcERhdGEgIT09IG51bGwgPyB0aGlzLngodGhpcy50b29sdGlwRGF0YS5kYXRlKSArIHRoaXMueC5iYW5kd2lkdGgoKSA6IC05OTk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBqc29uKCd1c3ZpZGVvZ2FtZV9zcGVuZGdyb3d0aC5qc29uJykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICBfdGhpcy5ncm91cHMgPSBkYXRhLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLmRhdGU7CiAgICAgIH0pOwogICAgICBfdGhpcy5zZXJpZXMgPSBbImdhbWVzIiwgImhhcmR3YXJlIiwgImFjY2Vzc29yaWVzIl07CiAgICAgIF90aGlzLnJlY29yZHMgPSBkYXRhOwogICAgICBfdGhpcy5taW5WYWx1ZSA9IG1pbihkYXRhLCBmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBtaW4oX3RoaXMuc2VyaWVzLCBmdW5jdGlvbiAocykgewogICAgICAgICAgcmV0dXJuIGRbc107CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBfdGhpcy5tYXhWYWx1ZSA9IG1heChkYXRhLCBmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBtYXgoX3RoaXMuc2VyaWVzLCBmdW5jdGlvbiAocykgewogICAgICAgICAgcmV0dXJuIGRbc107CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5yZXNpemUoKTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCB0aGlzLnJlc2l6ZSk7CiAgfSwKICBiZWZvcmVVbm1vdW50OiBmdW5jdGlvbiBiZWZvcmVVbm1vdW50KCkgewogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHRoaXMucmVzaXplKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc2l6ZTogZnVuY3Rpb24gcmVzaXplKCkgewogICAgICB0aGlzLndpZHRoID0gdGhpcy4kcmVmcy5jb250YWluZXIuY2xpZW50V2lkdGg7CiAgICB9LAogICAgZW50ZXJlZDogZnVuY3Rpb24gZW50ZXJlZChpKSB7CiAgICAgIHRoaXMudG9vbHRpcFNob3cgPSB0cnVlOwogICAgICB0aGlzLnRvb2x0aXBEYXRhID0gdGhpcy5yZWNvcmRzW2ldOwogICAgfSwKICAgIGxlZnQ6IGZ1bmN0aW9uIGxlZnQoKSB7CiAgICAgIHRoaXMudG9vbHRpcFNob3cgPSBmYWxzZTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/yujunjiang/Documents/GitHub/a-different-game/src/components/USSpendGrowthChart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div>\n  <ChartTitle>Growth of consumer spending on video games in the United States from March to August 2020</ChartTitle>\n  <div class=\"chart-body\" ref=\"container\">\n    <svg\n      :viewBox=\"`0 0 ${width} ${height}`\"\n      ref=\"svg\"\n    >\n      <ChartXAxis\n        :x=\"x\"\n        :tick-values=\"groups\"\n        :transform=\"`translate(0,${height - margin.bottom})`\"\n      />\n      <ChartYAxis\n        :y=\"y\"\n        :transform=\"`translate(${margin.left},0)`\"\n        :tickFormat=\"formatValue\"\n      />\n      <line\n        :x1=\"x.range()[0]\"\n        :x2=\"x.range()[1]\"\n        :y1=\"y(0)\"\n        :y2=\"y(0)\"\n        stroke=\"currentColor\"\n      ></line>\n      <g>\n        <g \n          v-for=\"(g, i) in groups\" \n          :key=\"g\"\n          :transform=\"`translate(${x(g)},0)`\"\n          class=\"hoverable\"\n          @mouseenter=\"entered(i)\"\n          @mouseleave=\"left\"\n          >\n            <rect\n              v-for=\"s in series\"\n              :key=\"s\"\n              :class=\"s\"\n              :x=\"xInner(s)\"\n              :width=\"xInner.bandwidth()\"\n              :y=\"Math.min(y(0), y(records[i][s]))\"\n              :height=\"Math.abs(y(0) - y(records[i][s]))\"\n              fill=\"currentColor\"\n            ></rect>\n        </g>\n      </g>\n    </svg>\n    <ChartTooltip\n      :bounds-width=\"width\"\n      :x=\"tooltipX\"\n      :y=\"tooltipY\"\n      :show=\"tooltipShow\"\n    >\n      <div v-if=\"tooltipData\">\n        <div class=\"tooltip-item tooltip-title\">{{ tooltipData.date }}</div>\n        <div v-for=\"s in series\" :key=\"s\" class=\"tooltip-item\">\n          <div :class=\"s\" class=\"tooltip-name\">{{ s }}</div>\n          <div>{{ formatValue(tooltipData[s]) }}</div>\n        </div>\n      </div>\n    </ChartTooltip>\n  </div>\n</div>\n</template>\n\n<script>\nimport { json, min, max, scaleBand, scaleLinear } from \"d3\";\nimport ChartTitle from \"./ChartTitle.vue\";\nimport ChartXAxis from \"./ChartXAxis.vue\";\nimport ChartYAxis from \"./ChartYAxis.vue\";\nimport ChartTooltip from \"./ChartTooltip.vue\";\n\nexport default {\n  components: {\n    ChartTitle,\n    ChartXAxis,\n    ChartYAxis,\n    ChartTooltip\n  },\n  data() {\n    return {\n      groups: [],\n      series: [],\n      records: [],\n      minValue: 0,\n      maxValue: 0,\n      width: 300,\n      height: 400,\n      margin: {\n        top: 10,\n        right: 5,\n        bottom: 120,\n        left: 48\n      },\n      tooltipData: null,\n      tooltipY: 100,\n      tooltipShow: false\n    }\n  },\n  computed: {\n    x() {\n      return scaleBand()\n        .domain(this.groups)\n        .range([this.margin.left, this.width - this.margin.right])\n        .padding(0.4);\n    },\n    xInner() {\n      return scaleBand()\n        .domain(this.series)\n        .range([0, this.x.bandwidth()])\n        .padding(0.1);\n    },\n    y() {\n      return scaleLinear()\n        .domain([this.minValue, this.maxValue])\n        .range([this.height - this.margin.bottom, this.margin.top])\n        .nice();\n    },\n    formatValue() {\n      return v => `${v}%`;\n    },\n    tooltipX() {\n      return this.tooltipData !== null \n        ? this.x(this.tooltipData.date) + this.x.bandwidth() \n        : -999;\n    }\n  },\n  created() {\n    json('usvideogame_spendgrowth.json')\n    .then(data => {\n      this.groups = data.map(d => d.date);\n      this.series = [\"games\", \"hardware\", \"accessories\"];\n      this.records = data;\n      this.minValue = min(data, d => min(this.series, s => d[s]));\n      this.maxValue = max(data, d => max(this.series, s => d[s]));\n    });\n  },\n  mounted() {\n    this.resize();\n    window.addEventListener(\"resize\", this.resize);\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"resize\", this.resize);\n  },\n  methods: {\n    resize() {\n      this.width = this.$refs.container.clientWidth;\n    },\n    entered(i) {\n      this.tooltipShow = true;\n      this.tooltipData = this.records[i];\n    },\n    left() {\n      this.tooltipShow = false;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.chart-body {\n  position: relative;\n}\n.games {\n  color: #9146FF;\n}\n.hardware {\n  color: #F92772;\n}\n.accessories {\n  color: #C1B761;\n}\n.hoverable:hover {\n  filter: brightness(125%);\n}\n::v-deep(.axis--x .domain),\n::v-deep(.axis--x .tick) line {\n  display: none;\n}\n</style>"],"sourceRoot":""}]}