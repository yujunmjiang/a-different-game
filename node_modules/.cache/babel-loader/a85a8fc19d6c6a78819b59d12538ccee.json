{"remainingRequest":"/Users/yujunjiang/Downloads/gaming-industry-tracker/app/node_modules/babel-loader/lib/index.js!/Users/yujunjiang/Downloads/gaming-industry-tracker/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yujunjiang/Downloads/gaming-industry-tracker/app/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/yujunjiang/Downloads/gaming-industry-tracker/app/src/components/USConsumerSpendChart.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/yujunjiang/Downloads/gaming-industry-tracker/app/src/components/USConsumerSpendChart.vue","mtime":1619547849000},{"path":"/Users/yujunjiang/Downloads/gaming-industry-tracker/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yujunjiang/Downloads/gaming-industry-tracker/app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yujunjiang/Downloads/gaming-industry-tracker/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yujunjiang/Downloads/gaming-industry-tracker/app/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgeyBqc29uLCBtYXgsIHNjYWxlQmFuZCwgc2NhbGVMaW5lYXIsIHN0YWNrLCBzdGFja09yZGVyTm9uZSwgc3RhY2tPZmZzZXROb25lIH0gZnJvbSAiZDMiOwppbXBvcnQgQ2hhcnRUaXRsZSBmcm9tICIuL0NoYXJ0VGl0bGUudnVlIjsKaW1wb3J0IENoYXJ0WEF4aXMgZnJvbSAiLi9DaGFydFhBeGlzLnZ1ZSI7CmltcG9ydCBDaGFydFlBeGlzIGZyb20gIi4vQ2hhcnRZQXhpcy52dWUiOwppbXBvcnQgQ2hhcnRUb29sdGlwIGZyb20gIi4vQ2hhcnRUb29sdGlwLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDaGFydFRpdGxlOiBDaGFydFRpdGxlLAogICAgQ2hhcnRYQXhpczogQ2hhcnRYQXhpcywKICAgIENoYXJ0WUF4aXM6IENoYXJ0WUF4aXMsCiAgICBDaGFydFRvb2x0aXA6IENoYXJ0VG9vbHRpcAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGdyb3VwczogW10sCiAgICAgIHNlcmllczogW10sCiAgICAgIHN0YWNrczogW10sCiAgICAgIG1heFZhbHVlOiAwLAogICAgICB3aWR0aDogMzAwLAogICAgICBoZWlnaHQ6IDQwMCwKICAgICAgbWFyZ2luOiB7CiAgICAgICAgdG9wOiAxMCwKICAgICAgICByaWdodDogNSwKICAgICAgICBib3R0b206IDEyMCwKICAgICAgICBsZWZ0OiA0OAogICAgICB9LAogICAgICB0b29sdGlwRGF0YTogbnVsbCwKICAgICAgdG9vbHRpcFNob3c6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHg6IGZ1bmN0aW9uIHgoKSB7CiAgICAgIHJldHVybiBzY2FsZUJhbmQoKS5kb21haW4odGhpcy5ncm91cHMpLnJhbmdlKFt0aGlzLm1hcmdpbi5sZWZ0LCB0aGlzLndpZHRoIC0gdGhpcy5tYXJnaW4ucmlnaHRdKS5wYWRkaW5nKDAuNCk7CiAgICB9LAogICAgeTogZnVuY3Rpb24geSgpIHsKICAgICAgcmV0dXJuIHNjYWxlTGluZWFyKCkuZG9tYWluKFswLCB0aGlzLm1heFZhbHVlXSkucmFuZ2UoW3RoaXMuaGVpZ2h0IC0gdGhpcy5tYXJnaW4uYm90dG9tLCB0aGlzLm1hcmdpbi50b3BdKS5uaWNlKCk7CiAgICB9LAogICAgZm9ybWF0VmFsdWU6IGZ1bmN0aW9uIGZvcm1hdFZhbHVlKCkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gIiQgIi5jb25jYXQodiwgIkIiKTsKICAgICAgfTsKICAgIH0sCiAgICB0b29sdGlwWDogZnVuY3Rpb24gdG9vbHRpcFgoKSB7CiAgICAgIHJldHVybiB0aGlzLnRvb2x0aXBEYXRhICE9PSBudWxsID8gdGhpcy54KHRoaXMudG9vbHRpcERhdGFbMF0pICsgdGhpcy54LmJhbmR3aWR0aCgpIDogLTk5OTsKICAgIH0sCiAgICB0b29sdGlwWTogZnVuY3Rpb24gdG9vbHRpcFkoKSB7CiAgICAgIHJldHVybiB0aGlzLnRvb2x0aXBEYXRhICE9PSBudWxsID8gdGhpcy55KHRoaXMudG9vbHRpcERhdGFbMV1bdGhpcy50b29sdGlwRGF0YVsxXS5sZW5ndGggLSAxXVswXVsxXSkgOiAtOTk5OwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAganNvbigndXN2aWRlb2dhbWVfY29uc3VtZXJzcGVuZC5qc29uJykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICBfdGhpcy5ncm91cHMgPSBkYXRhLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLnRpbWU7CiAgICAgIH0pOwogICAgICBfdGhpcy5zZXJpZXMgPSBbImNvbnRlbnQiLCAiaGFyZHdhcmUiLCAiYWNjZXNzb3JpZXMiXTsKICAgICAgdmFyIHN0YWNrR2VuZXJhdG9yID0gc3RhY2soKS5rZXlzKF90aGlzLnNlcmllcykub3JkZXIoc3RhY2tPcmRlck5vbmUpLm9mZnNldChzdGFja09mZnNldE5vbmUpOwogICAgICBfdGhpcy5zdGFja3MgPSBkYXRhLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBbZC50aW1lLCBzdGFja0dlbmVyYXRvcihbZF0pXTsKICAgICAgfSk7CiAgICAgIF90aGlzLm1heFZhbHVlID0gbWF4KF90aGlzLnN0YWNrcywgZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gbWF4KGRbMV0sIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gZVtlLmxlbmd0aCAtIDFdWzFdOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMucmVzaXplKCk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5yZXNpemUpOwogIH0sCiAgYmVmb3JlVW5tb3VudDogZnVuY3Rpb24gYmVmb3JlVW5tb3VudCgpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJyZXNpemUiLCB0aGlzLnJlc2l6ZSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNpemU6IGZ1bmN0aW9uIHJlc2l6ZSgpIHsKICAgICAgdGhpcy53aWR0aCA9IHRoaXMuJHJlZnMuY29udGFpbmVyLmNsaWVudFdpZHRoOwogICAgfSwKICAgIGVudGVyZWQ6IGZ1bmN0aW9uIGVudGVyZWQoaSkgewogICAgICB0aGlzLnRvb2x0aXBTaG93ID0gdHJ1ZTsKICAgICAgdGhpcy50b29sdGlwRGF0YSA9IHRoaXMuc3RhY2tzW2ldOwogICAgfSwKICAgIGxlZnQ6IGZ1bmN0aW9uIGxlZnQoKSB7CiAgICAgIHRoaXMudG9vbHRpcFNob3cgPSBmYWxzZTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/yujunjiang/Downloads/gaming-industry-tracker/app/src/components/USConsumerSpendChart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div>\n  <ChartTitle>Consumer spending on gaming in the United States in 2nd quarter 2019 and 2nd quarter 2020</ChartTitle>\n  <div class=\"chart-body\" ref=\"container\">\n    <svg\n      :viewBox=\"`0 0 ${width} ${height}`\"\n      ref=\"svg\"\n    >\n      <ChartXAxis\n        :x=\"x\"\n        :tick-values=\"groups\"\n        :transform=\"`translate(0,${height - margin.bottom})`\"\n      />\n      <ChartYAxis\n        :y=\"y\"\n        :transform=\"`translate(${margin.left},0)`\"\n      />\n      <g>\n        <g \n          v-for=\"([g, gs], i) in stacks\" \n          :key=\"g\"\n          :transform=\"`translate(${x(g)},0)`\"\n          class=\"hoverable\"\n          @mouseenter=\"entered(i)\"\n          @mouseleave=\"left\"\n          >\n            <rect\n              v-for=\"s in gs\"\n              :key=\"s.key\"\n              :class=\"s.key\"\n              :width=\"x.bandwidth()\"\n              :y=\"y(s[0][1])\"\n              :height=\"y(s[0][0])- y(s[0][1])\"\n              fill=\"currentColor\"\n            ></rect>\n            <text\n              v-for=\"s in gs\"\n              :key=\"s.key\"\n              class=\"value-label\"\n              :x=\"x.bandwidth() / 2\"\n              :y=\"(y(s[0][0]) + y(s[0][1])) / 2\"\n              dy=\"0.32em\"\n              text-anchor=\"middle\"\n              fill=\"currentColor\"\n            >{{ s[0].data[s.key] }}</text>\n        </g>\n      </g>\n    </svg>\n    <ChartTooltip\n      :bounds-width=\"width\"\n      :x=\"tooltipX\"\n      :y=\"tooltipY\"\n      :show=\"tooltipShow\"\n    >\n      <div v-if=\"tooltipData\">\n        <div class=\"tooltip-item tooltip-title\">{{ tooltipData[0] }}</div>\n        <div v-for=\"d in tooltipData[1]\" :key=\"d.key\" class=\"tooltip-item\">\n          <div :class=\"d.key\" class=\"tooltip-name\">{{ d.key }}</div>\n          <div>{{ formatValue(d[0].data[d.key]) }}</div>\n        </div>\n      </div>\n    </ChartTooltip>\n  </div>\n</div>\n</template>\n\n<script>\nimport { json, max, scaleBand, scaleLinear, stack, stackOrderNone, stackOffsetNone} from \"d3\";\nimport ChartTitle from \"./ChartTitle.vue\";\nimport ChartXAxis from \"./ChartXAxis.vue\";\nimport ChartYAxis from \"./ChartYAxis.vue\";\nimport ChartTooltip from \"./ChartTooltip.vue\";\n\nexport default {\n  components: {\n    ChartTitle,\n    ChartXAxis,\n    ChartYAxis,\n    ChartTooltip\n  },\n  data() {\n    return {\n      groups: [],\n      series: [],\n      stacks: [],\n      maxValue: 0,\n      width: 300,\n      height: 400,\n      margin: {\n        top: 10,\n        right: 5,\n        bottom: 120,\n        left: 48\n      },\n      tooltipData: null,\n      tooltipShow: false\n    }\n  },\n  computed: {\n    x() {\n      return scaleBand()\n        .domain(this.groups)\n        .range([this.margin.left, this.width - this.margin.right])\n        .padding(0.4);\n    },\n    y() {\n      return scaleLinear()\n        .domain([0, this.maxValue])\n        .range([this.height - this.margin.bottom, this.margin.top])\n        .nice();\n    },\n    formatValue() {\n      return v => `$ ${v}B`;\n    },\n    tooltipX() {\n      return this.tooltipData !== null \n        ? this.x(this.tooltipData[0]) + this.x.bandwidth() \n        : -999;\n    },\n    tooltipY() {\n      return this.tooltipData !== null \n        ? this.y(this.tooltipData[1][this.tooltipData[1].length - 1][0][1])\n        : -999;\n    }\n  },\n  created() {\n    json('usvideogame_consumerspend.json')\n    .then(data => {\n      this.groups = data.map(d => d.time);\n      this.series = [\"content\", \"hardware\", \"accessories\"];\n      const stackGenerator = stack()\n        .keys(this.series)\n        .order(stackOrderNone)\n        .offset(stackOffsetNone);\n      this.stacks = data.map(d => [\n        d.time,\n        stackGenerator([d])\n      ]);\n      this.maxValue = max(this.stacks, d => max(d[1], e => e[e.length - 1][1]));\n    });\n  },\n  mounted() {\n    this.resize();\n    window.addEventListener(\"resize\", this.resize);\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"resize\", this.resize);\n  },\n  methods: {\n    resize() {\n      this.width = this.$refs.container.clientWidth;\n    },\n    entered(i) {\n      this.tooltipShow = true;\n      this.tooltipData = this.stacks[i];\n    },\n    left() {\n      this.tooltipShow = false;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.chart-body {\n  position: relative;\n}\n.value-label {\n  color: #fff;\n}\n.content {\n  color: #9146FF;\n}\n.hardware {\n  color: #F92772;\n}\n.accessories {\n  color: #C1B761;\n}\n.hoverable:hover {\n  filter: brightness(125%);\n}\n</style>"],"sourceRoot":""}]}